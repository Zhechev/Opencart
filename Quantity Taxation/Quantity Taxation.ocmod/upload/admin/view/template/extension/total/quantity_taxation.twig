{#php
/**
 * EXTENSA
 *
 * Product Quantity Taxation 3.0
 *
 * @author    EXTENSA <info@extensadev.com>
 * @copyright Copyright (c) 2009-2017, Extensa Web Development OOD (http://extensadev.com/) All rights reserved.
 * @license   http://extensadev.com/licenses/LICENSE-EULA-extensions-en.txt EXTENSA Commercial Software License (EULA)
 * @package   EXTENSA\OpenCart extensions\Quantity Taxation
 * @link      http://extensadev.com/
 * @version   GIT: $Id$
 * @CID       $ClientID$
*/

#}
{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-quantity_taxation" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if error_warning %}
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-quantity_taxation" class="form-horizontal"> 
		
			<div class="form-group required">
				<label class="col-sm-2 control-label" for="input-status">{{ entry_tax_name }}</label>
				<div class="col-sm-10">
				  <input type="text" name="total_quantity_taxation_name" value="{{ total_quantity_taxation_name }}" placeholder="{{ entry_tax_name }}" class="form-control" />
				</div>
			</div>
			
			<div class="form-group required">
                <label class="col-sm-2 control-label" for="input-status"><span data-toggle="tooltip" title="{{ help_currency }}">{{ entry_currency }}</label>
                <div class="col-sm-10">
                  <div class="well well-sm" style="height: 150px; overflow: auto;">
          {% for currency in currencies %}
					<div class="checkbox">
						<label>
            {% if total_quantity_taxation_curr is defined and currency['code'] in total_quantity_taxation_curr %}
							<input type="checkbox" name="total_quantity_taxation_curr[{{ currency['currency_id'] }}]" id="input-heading{{ currency['currency_id'] }}" value="{{ currency['code'] }}" checked="checked" />{{ currency['title'] }}
						{% else %}
							<input type="checkbox" name="total_quantity_taxation_curr[{{ currency['currency_id'] }}]" id="input-heading{{ currency['currency_id'] }}" value="{{ currency['code'] }}"/>{{ currency['title'] }}
            {% endif %}
						</label>
					</div>
					{% endfor %}
                  </div>
                </div>
            </div>
			
			<div class="form-group required">
                <label class="col-sm-2 control-label" for="input-status"><span data-toggle="tooltip" title="{{ help_language }}">{{ entry_language }}</label>
                <div class="col-sm-10">
                  <div class="well well-sm" style="height: 150px; overflow: auto;">
          {% for language in languages %}
					<div class="checkbox">
						<label>
            {% if total_quantity_taxation_lang is defined and language['code'] in total_quantity_taxation_lang %}
							<input type="checkbox" name="total_quantity_taxation_lang[{{ language['language_id'] }}]" id="input-heading{{ language['language_id'] }}" value="{{ language['code'] }}" checked="checked" />{{ language['name'] }}
						{% else %}
							<input type="checkbox" name="total_quantity_taxation_lang[{{ language['language_id'] }}]" id="input-heading{{ language['language_id'] }}" value="{{ language['code'] }}"/>{{ language['name'] }}
						{% endif %}
						</label>
					</div>
					{% endfor %}
                  </div>
                </div>
            </div>
			
			<div class="form-group required">
                <label class="col-sm-2 control-label" for="input-status">{{ entry_customer_group }}</label>
                <div class="col-sm-10">
                  <div class="well well-sm" style="height: 150px; overflow: auto;">
          {% for customer_group in customer_groups %}
					<div class="checkbox">
						<label>
            {% if total_quantity_taxation_customer_group is defined and customer_group['name'] in total_quantity_taxation_customer_group %}
							<input type="checkbox" name="total_quantity_taxation_customer_group[{{ customer_group['customer_group_id'] }}]" id="input-heading{{ customer_group['customer_group_id'] }}" value="{{ customer_group['name'] }}" checked="checked" />{{ customer_group['name'] }}
						{% else %}
							<input type="checkbox" name="total_quantity_taxation_customer_group[{{ customer_group['customer_group_id'] }}]" id="input-heading{{ customer_group['customer_group_id'] }}" value="{{ customer_group['name'] }}" />{{ customer_group['name'] }}
						{% endif %}
						</label>
					</div>
					{% endfor %}
                  </div>
                </div>
            </div>
			
			<div class="form-group required">
                <label class="col-sm-2 control-label" for="input-status">{{ entry_geo_zone }}</label>
                <div class="col-sm-10">
                  <div class="well well-sm" style="height: 150px; overflow: auto;">
          {% for geo_zone in geo_zones %}
					<div class="checkbox">
						<label>
            {% if total_quantity_taxation_geo_zone is defined and geo_zone['name'] in total_quantity_taxation_geo_zone %}
							<input type="checkbox" name="total_quantity_taxation_geo_zone[{{ geo_zone['geo_zone_id'] }}]" id="input-heading{{ geo_zone['geo_zone_id'] }}" value="{{ geo_zone['name'] }}" checked="checked" />{{ geo_zone['name'] }}
						{% else %}
							<input type="checkbox" name="total_quantity_taxation_geo_zone[{{ geo_zone['geo_zone_id'] }}]" id="input-heading{{ geo_zone['geo_zone_id'] }}" value="{{ geo_zone['name'] }}" />{{ geo_zone['name'] }}
						{% endif %}
						</label>
					</div>
					{% endfor %}
                  </div>
                </div>
            </div>
			
			<div class="tab-pane">
              <div class="table-responsive">
                <table id="special" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_from }}</td>
                      <td class="text-left">{{ entry_to }}</td>
                      <td class="text-right">{{ entry_tax }}</td>
                      <td class="text-right">{{ entry_type }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
					{% set special_row = 1 %}
          {% if total_quantity_taxation_range is empty %}
						<tr id="special-row{{ special_row }}">
							<td class="text-left">
								<input type="text" name="total_quantity_taxation_range[0][from]" value="" placeholder="{{ entry_from }}" class="form-control" />
							</td>
							<td class="text-left">
								<input type="text" name="total_quantity_taxation_range[0][to]" value="" placeholder="{{ entry_to }}" class="form-control" />
							</td>
							<td class="text-right">
								<input type="text" name="total_quantity_taxation_range[0][tax]" value="" placeholder="{{ entry_tax }}" class="form-control" />
							</td>
							<td class="text-center">
								<select name="quantity_taxation_range[0][type]" id="input-status" class="form-control">
									<option value="1" selected="selected">{{ entry_percent }}</option>
									<option value="0">{{ entry_fixed }}</option>
								 </select>
							</td>
							<td class="text-center"><button type="button" onclick="$('#special-row{{ special_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
						</tr>
						{% else %}
            {% for row in total_quantity_taxation_range %}
							<tr id="special-row{{ special_row }}">
								<td class="text-left">
									<input type="text" name="total_quantity_taxation_range[{{ special_row }}][from]" value="{{ row['from'] }}" placeholder="{{ entry_from }}" class="form-control" />
								</td>
								<td class="text-left">
									<input type="text" name="total_quantity_taxation_range[{{ special_row }}][to]" value="{{ row['to'] }}" placeholder="{{ entry_to }}" class="form-control" />
								</td>
								<td class="text-right">
									<input type="text" name="total_quantity_taxation_range[{{ special_row }}][tax]" value="{{ row['tax'] }}" placeholder="{{ entry_tax }}" class="form-control" />
								</td>
								<td class="text-center">
									<select name="total_quantity_taxation_range[{{ special_row }}][type]" id="input-status" class="form-control">
										{% if total_quantity_taxation_status[special_row]['type'] == 1 %}
										<option value="1" selected="selected">{{ entry_percent }}</option>
										<option value="0">{{ entry_fixed }}</option>
										{% else %}
										<option value="1">{{ entry_percent }}</option>
										<option value="0" selected="selected">{{ entry_fixed }}</option>
										{% endif %}
									 </select>
								</td>
								<td class="text-center"><button type="button" onclick="$('#special-row{{ special_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
							</tr>
							{% set special_row = special_row + 1 %}
							{% endfor %}
						{% endif %}
				  </tbody>
				  <tfoot>
                    <tr>
                      <td colspan="4"></td>
                      <td class="text-center"><button type="button" onclick="addNewTaxRange();" data-toggle="tooltip" title="{{ button_special_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
			
			<div class="form-group required">
				<label class="col-sm-2 control-label" for="input-status">{{ entry_sort_order }}<span data-toggle="tooltip" title="{{ help_sort_order }}"></label>
				<div class="col-sm-10">   
				  <input type="text" name="total_quantity_taxation_sort_order" value="{{ (total_quantity_taxation_sort_order is defined) ? total_quantity_taxation_sort_order : '' }}" placeholder="{{ entry_sort_order }}" class="form-control" />
				</div>
			</div>
			
			<div class="form-group">
				<label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
				<div class="col-sm-10">
				  <select name="total_quantity_taxation_status" id="input-status" class="form-control">
					{% if total_quantity_taxation_status %}
					<option value="1" selected="selected">{{ text_enabled }}</option>
					<option value="0">{{ text_disabled }}</option>
					{% else %}
					<option value="1">{{ text_enabled }}</option>
					<option value="0" selected="selected">{{ text_disabled }}</option>
					{% endif %}
				  </select>
				</div>
			</div>
		
        </form>
      </div>
	</div>
  </div>
</div>
<script type="text/javascript"><!--
var special_row = {{ special_row }}

function addNewTaxRange() {
	html  = '<tr id="special-row' + special_row + '">';
  html += '  <td class="text-left"><input type="text" name="total_quantity_taxation_range[' + special_row + '][from]" value="" placeholder="{{ entry_from }}" class="form-control" />';
	html += '  <td class="text-left"><input type="text" name="total_quantity_taxation_range[' + special_row + '][to]" value="" placeholder="{{ entry_to }}" class="form-control" />';
	html += '  <td class="text-left"><input type="text" name="total_quantity_taxation_range[' + special_row + '][tax]" value="" placeholder="{{ entry_tax }}" class="form-control" />';
	html += '<td class="text-center">';
	html += '<select name="total_quantity_taxation_range[' + special_row + '][type]" id="input-status" class="form-control">';
	html += '		<option value="1" selected="selected">{{ entry_percent }}</option>';
	html += '		<option value="0">{{ entry_fixed }}</option>';
	html += '</select>';
	html += '</td>';
	html += '  <td class="text-center"><button type="button" onclick="$(\'#special-row' + special_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	html += '</tr>';

	$('#special tbody').append(html);

	$('.date').datetimepicker({
		pickTime: false
	});

	special_row++;
}
//--></script>
{{ footer }}